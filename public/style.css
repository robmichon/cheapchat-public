/* Motywy */
:root{ --bg:#0b0c10; --fg:#e8e8e8; --card:#13151b; --border:#242633; --muted:#98a2b3; --btn:#4f46e5; --btn-fg:#fff; --accent:#8ab4f8; --chip:#334155; --ok:#22c55e; --warn:#f59e0b; }
body.theme-light{ --bg:#f6f7fb; --fg:#0b0c10; --card:#ffffff; --border:#d6d9e0; --muted:#6b7280; --btn:#4f46e5; --btn-fg:#fff; --accent:#1d4ed8; --chip:#e5e7eb; --ok:#16a34a; --warn:#d97706;}
body.theme-sepia{ --bg:#f4ecd8; --fg:#4b3f2f; --card:#fff8e6; --border:#e2d7c5; --muted:#7c6a55; --btn:#b7791f; --btn-fg:#fff; --accent:#8b5e34; --chip:#f1dfbf; --ok:#15803d; --warn:#a16207;}
body.theme-contrast{ --bg:#000; --fg:#fff; --card:#111; --border:#444; --muted:#ddd; --btn:#ff007a; --btn-fg:#000; --accent:#00ffff; --chip:#333; --ok:#22c55e; --warn:#fbbf24; }

*{box-sizing:border-box}
body{margin:0;background:var(--bg);color:var(--fg);font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,sans-serif}

.app{display:grid;grid-template-columns:260px 1fr 260px;min-height:100vh;column-gap:12px}
.sidebar{background:var(--bg);border-right:1px solid var(--border);padding:12px;position:relative;z-index:2}
.sidebar.right{border-left:1px solid var(--border);border-right:none}
.main{padding:12px;position:relative;z-index:1}

.card{background:var(--card);border:1px solid var(--border);border-radius:16px;box-shadow:0 6px 24px rgba(0,0,0,.35)}
#chat{height:65vh;overflow:auto;padding:16px}
.msg{padding:10px 12px;border-radius:12px;margin:8px 0;max-width:80%}
.user{background:color-mix(in oklab, var(--card) 70%, var(--accent) 30%);margin-left:auto}
.assistant{background:var(--card)}
.meta{font-size:12px;color:var(--muted);margin:6px 0 6px}

.sidehead{display:flex;gap:8px;align-items:center;position:relative;z-index:3}
.threads{max-height:calc(100vh - 160px);overflow:auto;margin-top:8px}
.th{position:relative;padding:8px 32px 8px 8px;border-radius:10px;border:1px solid var(--border);margin-bottom:6px;cursor:pointer}
.th.active{outline:2px solid var(--accent)}
.th .del{position:absolute;right:6px;top:6px;background:transparent;border:0;color:#94a3b8;cursor:pointer}
.th .del:hover{color:#f43f5e}
.note{font-size:12px;color:var(--muted);margin-top:6px}

.composer{display:flex;gap:8px;border-top:1px solid var(--border);padding:12px}
textarea,input,select{background:var(--bg);border:1px solid var(--border);color:var(--fg);border-radius:10px;padding:10px}
button{background:var(--btn);color:var(--btn-fg);border:0;border-radius:10px;padding:10px 14px;cursor:pointer}
button:disabled{opacity:.6;cursor:not-allowed}
.colbtns{display:flex;flex-direction:column;gap:8px}
#micBtn.rec{background:#ef4444}

img.chatimg{max-width:60%;border-radius:12px;border:1px solid var(--border);display:block}

/* Markdown pretties */
#chat h1,#chat h2,#chat h3{margin:12px 0 6px}
#chat pre{background:var(--bg);border:1px solid var(--border);border-radius:10px;padding:12px;overflow:auto;position:relative}
#chat code{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace}
#chat table{border-collapse: collapse; margin:8px 0; width:100%}
#chat th,#chat td{border:1px solid var(--border); padding:6px 8px}
#chat a{color:var(--accent)}
.copybtn{position:absolute;right:8px;top:8px;padding:4px 8px;font-size:12px;background:var(--chip);border:0;border-radius:6px;color:var(--fg);cursor:pointer}

/* Status / typing */
.status{margin-left:8px;padding:4px 8px;border-radius:999px;background:var(--chip);color:var(--fg);font-size:12px;display:inline-block}
.typing .dot{display:inline-block;width:6px;height:6px;border-radius:50%;background:var(--muted);margin:0 2px;animation: blink 1s infinite}
.typing .dot:nth-child(2){animation-delay:.2s}
.typing .dot:nth-child(3){animation-delay:.4s}
@keyframes blink{0%,80%,100%{opacity:.2} 40%{opacity:1}}
.typing-bubble{opacity:.85}

